
<!DOCTYPE html>
<html lang="en" dir="ltr" xmlns:fb="http://ogp.me/ns/fb#">
<head>
	<title>JavaScript Speech Recognition Example</title>
</head>
<body>

<!-- content wrapper --><div class=main><div class="center clear"><!-- main content column --><main id=main><!--CONTENT-->
<div class="demo-wrapper">

<h1>Demo:  JavaScript Speech Recognition</h1>

<div class="demo-conversion">Read <a href="https://davidwalsh.name/?p=25922&preview=true" target="_top">JavaScript Speech Recognition</a></div>

<div id="promoNode"></div>

	<p>
		Allow access to your microphone and then say something -- the Speech Recognition API
		may echo back what you said!  Also: check out the Dev Tools console to follow events:
	</p>

	<button id="start-button">Start Listening</button>

	<p><strong>You said:</strong> <em id="demo-echo">nothing yet</em>.</p>

	<script type="text/javascript">
	function startListening() {
		var recognition = new (webkitSpeechRecognition || SpeechRecognition)();
		recognition.lang = 'en-US';
		recognition.interimResults = false;
		recognition.maxAlternatives = 1;
		recognition.start();

		[
		 'onaudiostart',
		 'onaudioend',
		 'onend',
		 'onerror',
		 'onnomatch',
		 'onresult',
		 'onsoundstart',
		 'onsoundend',
		 'onspeechend',
		 'onstart'
		].forEach(function(eventName) {
			recognition[eventName] = function(e) {
				console.log(eventName, e);
			};
		});

		document.querySelector('#start-button').innerHTML = 'Listening...';

		recognition.onend = function() {
			document.querySelector('#start-button').innerHTML = 'Start Listening';
		};
		recognition.onresult = function() {
			document.querySelector('#demo-echo').textContent = event.results[0][0].transcript;
		};
	};

	(function() {
		document.querySelector('#start-button').addEventListener('click', startListening);
	})();

	</script>

</div>

</main>
</body>
</html>
